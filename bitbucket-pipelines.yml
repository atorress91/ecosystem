#  Template NodeJS build

#  This template allows you to validate your NodeJS code.
#  The workflow allows running tests and code linting on the default branch.

image: node:latest

pipelines:
  branches:
    development:
      - step:
          name: Build and Deploy to QA
          script:
            - npm install -g @angular/cli  
            - npm install  
            - ng build --configuration=dev  
            - echo "$AWS_EC2_QA" | base64 --decode > /tmp/qa_key.pem  
            - chmod 600 /tmp/qa_key.pem  
            - scp -i /tmp/qa_key.pem -r dist/web ec2-user@ec2-52-87-171-214.compute-1.amazonaws.com:~/


